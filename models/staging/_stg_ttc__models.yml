version: 2

models:
  - name: stg_ttc_trips
    description: Staging model for TTC trip data with standardized column names and types
    columns:
      - name: trip_id
        description: Unique identifier for each trip
        tests:
          - unique
          - not_null
          
      - name: trip_datetime
        description: Timestamp when the trip occurred
        tests:
          - not_null
          
      - name: trip_date
        description: Date of the trip
        tests:
          - not_null
          
      - name: route_id
        description: Foreign key to route information
        tests:
          - not_null
          - relationships:
              to: ref('stg_route_info')
              field: route_id
              
      - name: passengers
        description: Number of passengers on the trip
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 200
              
      - name: fare_amount
        description: Fare amount collected
        tests:
          - not_null
          
      - name: payment_type
        description: Method of payment used
        tests:
          - accepted_values:
              values: ['Presto', 'Token', 'Cash', 'Day Pass', 'Monthly Pass']
              
      - name: boarding_status
        description: Whether the trip was on time, delayed, or early
        tests:
          - accepted_values:
              values: ['On Time', 'Delayed', 'Early']

  - name: stg_route_info
    description: Staging model for route reference data
    columns:
      - name: route_id
        description: Unique identifier for each route
        tests:
          - unique
          - not_null
          
      - name: route_name
        description: Name of the route
        tests:
          - not_null
          
      - name: route_type
        description: Type of transit (Bus, Subway, Streetcar)
        tests:
          - accepted_values:
              values: ['Bus', 'Subway', 'Streetcar']

